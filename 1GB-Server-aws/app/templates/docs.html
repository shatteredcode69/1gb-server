<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API Documentation - 1GB Server</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>

<body class="dashboard-body">
  <nav class="navbar">
    <div class="container">
      <a href="/" class="nav-brand">üåç 1GB World</a>
      <div class="nav-links">
        <a href="/" class="nav-link">Home</a>
        <a href="/dashboard" class="nav-link">Dashboard</a>
        <a href="/docs" class="nav-link active">Docs</a>
      </div>
    </div>
  </nav>

  <div class="container">
    <h1>üìö API Documentation</h1>
    <p class="subtitle">Interactive API Reference for 1GB Server</p>

    <div class="api-section">
      <h2>üß™ Available Endpoints</h2>

      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-get">GET</span>
          <code>/api/v1/health</code>
        </div>
        <p>Health check + 1GB proof fields (RSS/headroom)</p>
        <button onclick="testEndpoint('/api/v1/health')" class="btn btn-primary">Test Endpoint</button>
        <pre id="response-health" class="response-box"></pre>
      </div>

      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-get">GET</span>
          <code>/api/v1/metrics</code>
        </div>
        <p>Real-time metrics with 60-point history (dashboard)</p>
        <button onclick="testEndpoint('/api/v1/metrics')" class="btn btn-primary">Test Endpoint</button>
        <pre id="response-metrics" class="response-box"></pre>
      </div>

      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-get">GET</span>
          <code>/api/v1/story</code>
        </div>
        <p>Project story endpoint</p>
        <button onclick="testEndpoint('/api/v1/story')" class="btn btn-primary">Test Endpoint</button>
        <pre id="response-story" class="response-box"></pre>
      </div>

      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-get">GET</span>
          <code>/api/v1/challenge</code>
        </div>
        <p>Challenge description and components</p>
        <button onclick="testEndpoint('/api/v1/challenge')" class="btn btn-primary">Test Endpoint</button>
        <pre id="response-challenge" class="response-box"></pre>
      </div>

      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-get">GET</span>
          <code>/api/v1/system</code>
        </div>
        <p>System information + current metrics (same schema as /metrics current)</p>
        <button onclick="testEndpoint('/api/v1/system')" class="btn btn-primary">Test Endpoint</button>
        <pre id="response-system" class="response-box"></pre>
      </div>
    </div>
  </div>

  <script>
    async function testEndpoint(endpoint) {
      const responseId = 'response-' + endpoint.split('/').pop();
      const responseBox = document.getElementById(responseId);

      try {
        const response = await fetch(endpoint);
        const data = await response.json();
        responseBox.textContent = JSON.stringify(data, null, 2);
        responseBox.classList.add('show');
      } catch (error) {
        responseBox.textContent = 'Error: ' + error.message;
        responseBox.classList.add('show');
      }
    }
  </script>

  <script src="{{ url_for('static', filename='js/navbar.js') }}"></script>
</body>
</html>
